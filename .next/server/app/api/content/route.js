/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/content/route";
exports.ids = ["app/api/content/route"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("mongodb");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?d272":
/*!********************************!*\
  !*** supports-color (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontent%2Froute&page=%2Fapi%2Fcontent%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontent%2Froute.js&appDir=C%3A%5CUsers%5Cvitor%5COneDrive%5CDocumentos%5CGITHUB%5CProjetos%5CManna-1%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cvitor%5COneDrive%5CDocumentos%5CGITHUB%5CProjetos%5CManna-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontent%2Froute&page=%2Fapi%2Fcontent%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontent%2Froute.js&appDir=C%3A%5CUsers%5Cvitor%5COneDrive%5CDocumentos%5CGITHUB%5CProjetos%5CManna-1%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cvitor%5COneDrive%5CDocumentos%5CGITHUB%5CProjetos%5CManna-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_vitor_OneDrive_Documentos_GITHUB_Projetos_Manna_1_app_api_content_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/content/route.js */ \"(rsc)/./app/api/content/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/content/route\",\n        pathname: \"/api/content\",\n        filename: \"route\",\n        bundlePath: \"app/api/content/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\vitor\\\\OneDrive\\\\Documentos\\\\GITHUB\\\\Projetos\\\\Manna-1\\\\app\\\\api\\\\content\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_vitor_OneDrive_Documentos_GITHUB_Projetos_Manna_1_app_api_content_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/content/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjb250ZW50JTJGcm91dGUmcGFnZT0lMkZhcGklMkZjb250ZW50JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY29udGVudCUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUN2aXRvciU1Q09uZURyaXZlJTVDRG9jdW1lbnRvcyU1Q0dJVEhVQiU1Q1Byb2pldG9zJTVDTWFubmEtMSU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9QyUzQSU1Q1VzZXJzJTVDdml0b3IlNUNPbmVEcml2ZSU1Q0RvY3VtZW50b3MlNUNHSVRIVUIlNUNQcm9qZXRvcyU1Q01hbm5hLTEmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9c3RhbmRhbG9uZSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUM4QztBQUMzSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy1tb25nby10ZW1wbGF0ZS8/MTY3NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFx2aXRvclxcXFxPbmVEcml2ZVxcXFxEb2N1bWVudG9zXFxcXEdJVEhVQlxcXFxQcm9qZXRvc1xcXFxNYW5uYS0xXFxcXGFwcFxcXFxhcGlcXFxcY29udGVudFxcXFxyb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJzdGFuZGFsb25lXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NvbnRlbnQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jb250ZW50XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jb250ZW50L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcdml0b3JcXFxcT25lRHJpdmVcXFxcRG9jdW1lbnRvc1xcXFxHSVRIVUJcXFxcUHJvamV0b3NcXFxcTWFubmEtMVxcXFxhcHBcXFxcYXBpXFxcXGNvbnRlbnRcXFxccm91dGUuanNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2NvbnRlbnQvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontent%2Froute&page=%2Fapi%2Fcontent%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontent%2Froute.js&appDir=C%3A%5CUsers%5Cvitor%5COneDrive%5CDocumentos%5CGITHUB%5CProjetos%5CManna-1%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cvitor%5COneDrive%5CDocumentos%5CGITHUB%5CProjetos%5CManna-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/content/route.js":
/*!**********************************!*\
  !*** ./app/api/content/route.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _auth0_nextjs_auth0__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @auth0/nextjs-auth0 */ \"(rsc)/./node_modules/@auth0/nextjs-auth0/dist/index.js\");\n/* harmony import */ var _auth0_nextjs_auth0__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_auth0_nextjs_auth0__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\n// MongoDB connection\nlet client;\nlet db;\nasync function connectToMongo() {\n    if (!client) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_1__.MongoClient(process.env.MONGO_URL);\n        await client.connect();\n        db = client.db(process.env.DB_NAME || \"manna_db\");\n    }\n    return db;\n}\n// Helper function for CORS\nfunction handleCORS(response) {\n    response.headers.set(\"Access-Control-Allow-Origin\", \"*\");\n    response.headers.set(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS\");\n    response.headers.set(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization\");\n    return response;\n}\n// Content status enum\nconst ContentStatus = {\n    DRAFT: \"draft\",\n    REVIEW: \"review\",\n    PUBLISHED: \"published\",\n    ARCHIVED: \"archived\"\n};\n// GET /api/content - Get all content with filtering\nasync function GET(request) {\n    try {\n        const session = await (0,_auth0_nextjs_auth0__WEBPACK_IMPORTED_MODULE_2__.getSession)();\n        if (!session?.user) {\n            return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Authentication required\"\n            }, {\n                status: 401\n            }));\n        }\n        const { searchParams } = new URL(request.url);\n        const status = searchParams.get(\"status\");\n        const creatorId = searchParams.get(\"creatorId\");\n        const manhwaId = searchParams.get(\"manhwaId\");\n        const db = await connectToMongo();\n        // Build query\n        let query = {};\n        // Filter by status\n        if (status) {\n            query.status = status;\n        }\n        // Filter by creator (if not admin, only show own content)\n        const userRoles = session.user[\"https://manna-app.com/roles\"] || [];\n        const isAdmin = userRoles.includes(\"admin\");\n        if (!isAdmin) {\n            query.creatorId = session.user.sub;\n        } else if (creatorId) {\n            query.creatorId = creatorId;\n        }\n        // Filter by manhwa\n        if (manhwaId) {\n            query.manhwaId = manhwaId;\n        }\n        try {\n            const content = await db.collection(\"content\").find(query).sort({\n                updatedAt: -1\n            }).toArray();\n            const cleanedContent = content.map(({ _id, ...rest })=>rest);\n            return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                content: cleanedContent,\n                total: cleanedContent.length\n            }));\n        } catch (dbError) {\n            console.error(\"Database error:\", dbError);\n            return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                content: [],\n                total: 0\n            }));\n        }\n    } catch (error) {\n        console.error(\"Content fetch error:\", error);\n        return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch content\"\n        }, {\n            status: 500\n        }));\n    }\n}\n// POST /api/content - Create new content\nasync function POST(request) {\n    try {\n        const session = await (0,_auth0_nextjs_auth0__WEBPACK_IMPORTED_MODULE_2__.getSession)();\n        if (!session?.user) {\n            return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Authentication required\"\n            }, {\n                status: 401\n            }));\n        }\n        const userRoles = session.user[\"https://manna-app.com/roles\"] || [];\n        if (!userRoles.includes(\"creator\")) {\n            return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Creator role required\"\n            }, {\n                status: 403\n            }));\n        }\n        const body = await request.json();\n        const { type, manhwaId, chapterId, title, description, pages, metadata } = body;\n        // Validate required fields\n        if (!type || !title) {\n            return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Type and title are required\"\n            }, {\n                status: 400\n            }));\n        }\n        const db = await connectToMongo();\n        const newContent = {\n            id: (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(),\n            type,\n            title,\n            description: description || \"\",\n            manhwaId: manhwaId || null,\n            chapterId: chapterId || null,\n            pages: pages || [],\n            metadata: metadata || {},\n            status: ContentStatus.DRAFT,\n            creatorId: session.user.sub,\n            creatorName: session.user.name,\n            createdAt: new Date(),\n            updatedAt: new Date(),\n            publishedAt: null,\n            version: 1,\n            tags: metadata?.tags || [],\n            genre: metadata?.genre || [],\n            rating: 0,\n            views: 0,\n            likes: 0,\n            comments: []\n        };\n        try {\n            await db.collection(\"content\").insertOne(newContent);\n            const { _id, ...cleanedContent } = newContent;\n            return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(cleanedContent, {\n                status: 201\n            }));\n        } catch (dbError) {\n            console.error(\"Database insert error:\", dbError);\n            return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to create content\"\n            }, {\n                status: 500\n            }));\n        }\n    } catch (error) {\n        console.error(\"Content creation error:\", error);\n        return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to create content\"\n        }, {\n            status: 500\n        }));\n    }\n}\n// PUT /api/content - Update content\nasync function PUT(request) {\n    try {\n        const session = await (0,_auth0_nextjs_auth0__WEBPACK_IMPORTED_MODULE_2__.getSession)();\n        if (!session?.user) {\n            return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Authentication required\"\n            }, {\n                status: 401\n            }));\n        }\n        const body = await request.json();\n        const { id, title, description, pages, metadata, status } = body;\n        if (!id) {\n            return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Content ID is required\"\n            }, {\n                status: 400\n            }));\n        }\n        const db = await connectToMongo();\n        try {\n            // Check if content exists and user has permission\n            const existingContent = await db.collection(\"content\").findOne({\n                id\n            });\n            if (!existingContent) {\n                return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Content not found\"\n                }, {\n                    status: 404\n                }));\n            }\n            // Check permissions\n            const userRoles = session.user[\"https://manna-app.com/roles\"] || [];\n            const isAdmin = userRoles.includes(\"admin\");\n            const isOwner = existingContent.creatorId === session.user.sub;\n            if (!isAdmin && !isOwner) {\n                return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Permission denied\"\n                }, {\n                    status: 403\n                }));\n            }\n            // Prepare update\n            const updateData = {\n                updatedAt: new Date(),\n                version: existingContent.version + 1\n            };\n            if (title) updateData.title = title;\n            if (description !== undefined) updateData.description = description;\n            if (pages) updateData.pages = pages;\n            if (metadata) {\n                updateData.metadata = {\n                    ...existingContent.metadata,\n                    ...metadata\n                };\n                updateData.tags = metadata.tags || existingContent.tags || [];\n                updateData.genre = metadata.genre || existingContent.genre || [];\n            }\n            if (status && Object.values(ContentStatus).includes(status)) {\n                updateData.status = status;\n                if (status === ContentStatus.PUBLISHED && !existingContent.publishedAt) {\n                    updateData.publishedAt = new Date();\n                }\n            }\n            // Update content\n            const result = await db.collection(\"content\").updateOne({\n                id\n            }, {\n                $set: updateData\n            });\n            if (result.matchedCount === 0) {\n                return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Content not found\"\n                }, {\n                    status: 404\n                }));\n            }\n            // Fetch updated content\n            const updatedContent = await db.collection(\"content\").findOne({\n                id\n            });\n            const { _id, ...cleanedContent } = updatedContent;\n            return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(cleanedContent));\n        } catch (dbError) {\n            console.error(\"Database update error:\", dbError);\n            return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to update content\"\n            }, {\n                status: 500\n            }));\n        }\n    } catch (error) {\n        console.error(\"Content update error:\", error);\n        return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to update content\"\n        }, {\n            status: 500\n        }));\n    }\n}\n// DELETE /api/content - Delete content\nasync function DELETE(request) {\n    try {\n        const session = await (0,_auth0_nextjs_auth0__WEBPACK_IMPORTED_MODULE_2__.getSession)();\n        if (!session?.user) {\n            return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Authentication required\"\n            }, {\n                status: 401\n            }));\n        }\n        const { searchParams } = new URL(request.url);\n        const contentId = searchParams.get(\"id\");\n        if (!contentId) {\n            return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Content ID is required\"\n            }, {\n                status: 400\n            }));\n        }\n        const db = await connectToMongo();\n        try {\n            // Check if content exists and user has permission\n            const existingContent = await db.collection(\"content\").findOne({\n                id: contentId\n            });\n            if (!existingContent) {\n                return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Content not found\"\n                }, {\n                    status: 404\n                }));\n            }\n            const userRoles = session.user[\"https://manna-app.com/roles\"] || [];\n            const isAdmin = userRoles.includes(\"admin\");\n            const isOwner = existingContent.creatorId === session.user.sub;\n            if (!isAdmin && !isOwner) {\n                return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Permission denied\"\n                }, {\n                    status: 403\n                }));\n            }\n            // Delete content\n            await db.collection(\"content\").deleteOne({\n                id: contentId\n            });\n            return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"Content deleted successfully\"\n            }));\n        } catch (dbError) {\n            console.error(\"Database delete error:\", dbError);\n            return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to delete content\"\n            }, {\n                status: 500\n            }));\n        }\n    } catch (error) {\n        console.error(\"Content deletion error:\", error);\n        return handleCORS(next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to delete content\"\n        }, {\n            status: 500\n        }));\n    }\n}\nasync function OPTIONS() {\n    return handleCORS(new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n        status: 200\n    }));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z28tdGVtcGxhdGUvLi9hcHAvYXBpL2NvbnRlbnQvcm91dGUuanM/MWYyYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcclxuaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tICdtb25nb2RiJ1xyXG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJ1xyXG5pbXBvcnQgeyBnZXRTZXNzaW9uIH0gZnJvbSAnQGF1dGgwL25leHRqcy1hdXRoMCdcclxuXHJcbi8vIE1vbmdvREIgY29ubmVjdGlvblxyXG5sZXQgY2xpZW50XHJcbmxldCBkYlxyXG5cclxuYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvTW9uZ28oKSB7XHJcbiAgICBpZiAoIWNsaWVudCkge1xyXG4gICAgICAgIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudChwcm9jZXNzLmVudi5NT05HT19VUkwpXHJcbiAgICAgICAgYXdhaXQgY2xpZW50LmNvbm5lY3QoKVxyXG4gICAgICAgIGRiID0gY2xpZW50LmRiKHByb2Nlc3MuZW52LkRCX05BTUUgfHwgJ21hbm5hX2RiJylcclxuICAgIH1cclxuICAgIHJldHVybiBkYlxyXG59XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gZm9yIENPUlNcclxuZnVuY3Rpb24gaGFuZGxlQ09SUyhyZXNwb25zZSkge1xyXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICcqJylcclxuICAgIHJlc3BvbnNlLmhlYWRlcnMuc2V0KCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJywgJ0dFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlMnKVxyXG4gICAgcmVzcG9uc2UuaGVhZGVycy5zZXQoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uJylcclxuICAgIHJldHVybiByZXNwb25zZVxyXG59XHJcblxyXG4vLyBDb250ZW50IHN0YXR1cyBlbnVtXHJcbmNvbnN0IENvbnRlbnRTdGF0dXMgPSB7XHJcbiAgICBEUkFGVDogJ2RyYWZ0JyxcclxuICAgIFJFVklFVzogJ3JldmlldycsXHJcbiAgICBQVUJMSVNIRUQ6ICdwdWJsaXNoZWQnLFxyXG4gICAgQVJDSElWRUQ6ICdhcmNoaXZlZCdcclxufVxyXG5cclxuLy8gR0VUIC9hcGkvY29udGVudCAtIEdldCBhbGwgY29udGVudCB3aXRoIGZpbHRlcmluZ1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3QpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb24oKVxyXG4gICAgICAgIGlmICghc2Vzc2lvbj8udXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlQ09SUyhOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgICAgICAgIHsgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcgfSxcclxuICAgICAgICAgICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICAgICAgICApKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpXHJcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gc2VhcmNoUGFyYW1zLmdldCgnc3RhdHVzJylcclxuICAgICAgICBjb25zdCBjcmVhdG9ySWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdjcmVhdG9ySWQnKVxyXG4gICAgICAgIGNvbnN0IG1hbmh3YUlkID0gc2VhcmNoUGFyYW1zLmdldCgnbWFuaHdhSWQnKVxyXG5cclxuICAgICAgICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3RUb01vbmdvKClcclxuXHJcbiAgICAgICAgLy8gQnVpbGQgcXVlcnlcclxuICAgICAgICBsZXQgcXVlcnkgPSB7fVxyXG5cclxuICAgICAgICAvLyBGaWx0ZXIgYnkgc3RhdHVzXHJcbiAgICAgICAgaWYgKHN0YXR1cykge1xyXG4gICAgICAgICAgICBxdWVyeS5zdGF0dXMgPSBzdGF0dXNcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZpbHRlciBieSBjcmVhdG9yIChpZiBub3QgYWRtaW4sIG9ubHkgc2hvdyBvd24gY29udGVudClcclxuICAgICAgICBjb25zdCB1c2VyUm9sZXMgPSBzZXNzaW9uLnVzZXJbJ2h0dHBzOi8vbWFubmEtYXBwLmNvbS9yb2xlcyddIHx8IFtdXHJcbiAgICAgICAgY29uc3QgaXNBZG1pbiA9IHVzZXJSb2xlcy5pbmNsdWRlcygnYWRtaW4nKVxyXG5cclxuICAgICAgICBpZiAoIWlzQWRtaW4pIHtcclxuICAgICAgICAgICAgcXVlcnkuY3JlYXRvcklkID0gc2Vzc2lvbi51c2VyLnN1YlxyXG4gICAgICAgIH0gZWxzZSBpZiAoY3JlYXRvcklkKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5LmNyZWF0b3JJZCA9IGNyZWF0b3JJZFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRmlsdGVyIGJ5IG1hbmh3YVxyXG4gICAgICAgIGlmIChtYW5od2FJZCkge1xyXG4gICAgICAgICAgICBxdWVyeS5tYW5od2FJZCA9IG1hbmh3YUlkXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgZGIuY29sbGVjdGlvbignY29udGVudCcpLmZpbmQocXVlcnkpXHJcbiAgICAgICAgICAgICAgICAuc29ydCh7IHVwZGF0ZWRBdDogLTEgfSlcclxuICAgICAgICAgICAgICAgIC50b0FycmF5KClcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNsZWFuZWRDb250ZW50ID0gY29udGVudC5tYXAoKHsgX2lkLCAuLi5yZXN0IH0pID0+IHJlc3QpXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlQ09SUyhOZXh0UmVzcG9uc2UuanNvbih7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiBjbGVhbmVkQ29udGVudCxcclxuICAgICAgICAgICAgICAgIHRvdGFsOiBjbGVhbmVkQ29udGVudC5sZW5ndGhcclxuICAgICAgICAgICAgfSkpXHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGRiRXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgZXJyb3I6JywgZGJFcnJvcilcclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNPUlMoTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogW10sXHJcbiAgICAgICAgICAgICAgICB0b3RhbDogMFxyXG4gICAgICAgICAgICB9KSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdDb250ZW50IGZldGNoIGVycm9yOicsIGVycm9yKVxyXG4gICAgICAgIHJldHVybiBoYW5kbGVDT1JTKE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIGNvbnRlbnQnIH0sXHJcbiAgICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICAgICkpXHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFBPU1QgL2FwaS9jb250ZW50IC0gQ3JlYXRlIG5ldyBjb250ZW50XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3QpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb24oKVxyXG4gICAgICAgIGlmICghc2Vzc2lvbj8udXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlQ09SUyhOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgICAgICAgIHsgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcgfSxcclxuICAgICAgICAgICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICAgICAgICApKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdXNlclJvbGVzID0gc2Vzc2lvbi51c2VyWydodHRwczovL21hbm5hLWFwcC5jb20vcm9sZXMnXSB8fCBbXVxyXG4gICAgICAgIGlmICghdXNlclJvbGVzLmluY2x1ZGVzKCdjcmVhdG9yJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNPUlMoTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgICAgICB7IGVycm9yOiAnQ3JlYXRvciByb2xlIHJlcXVpcmVkJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBzdGF0dXM6IDQwMyB9XHJcbiAgICAgICAgICAgICkpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcclxuICAgICAgICBjb25zdCB7IHR5cGUsIG1hbmh3YUlkLCBjaGFwdGVySWQsIHRpdGxlLCBkZXNjcmlwdGlvbiwgcGFnZXMsIG1ldGFkYXRhIH0gPSBib2R5XHJcblxyXG4gICAgICAgIC8vIFZhbGlkYXRlIHJlcXVpcmVkIGZpZWxkc1xyXG4gICAgICAgIGlmICghdHlwZSB8fCAhdGl0bGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNPUlMoTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgICAgICB7IGVycm9yOiAnVHlwZSBhbmQgdGl0bGUgYXJlIHJlcXVpcmVkJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgICAgICkpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBkYiA9IGF3YWl0IGNvbm5lY3RUb01vbmdvKClcclxuXHJcbiAgICAgICAgY29uc3QgbmV3Q29udGVudCA9IHtcclxuICAgICAgICAgICAgaWQ6IHV1aWR2NCgpLFxyXG4gICAgICAgICAgICB0eXBlLCAvLyAnbWFuaHdhJywgJ2NoYXB0ZXInLCAncGFnZSdcclxuICAgICAgICAgICAgdGl0bGUsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiB8fCAnJyxcclxuICAgICAgICAgICAgbWFuaHdhSWQ6IG1hbmh3YUlkIHx8IG51bGwsXHJcbiAgICAgICAgICAgIGNoYXB0ZXJJZDogY2hhcHRlcklkIHx8IG51bGwsXHJcbiAgICAgICAgICAgIHBhZ2VzOiBwYWdlcyB8fCBbXSxcclxuICAgICAgICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhIHx8IHt9LFxyXG4gICAgICAgICAgICBzdGF0dXM6IENvbnRlbnRTdGF0dXMuRFJBRlQsXHJcbiAgICAgICAgICAgIGNyZWF0b3JJZDogc2Vzc2lvbi51c2VyLnN1YixcclxuICAgICAgICAgICAgY3JlYXRvck5hbWU6IHNlc3Npb24udXNlci5uYW1lLFxyXG4gICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgcHVibGlzaGVkQXQ6IG51bGwsXHJcbiAgICAgICAgICAgIHZlcnNpb246IDEsXHJcbiAgICAgICAgICAgIHRhZ3M6IG1ldGFkYXRhPy50YWdzIHx8IFtdLFxyXG4gICAgICAgICAgICBnZW5yZTogbWV0YWRhdGE/LmdlbnJlIHx8IFtdLFxyXG4gICAgICAgICAgICByYXRpbmc6IDAsXHJcbiAgICAgICAgICAgIHZpZXdzOiAwLFxyXG4gICAgICAgICAgICBsaWtlczogMCxcclxuICAgICAgICAgICAgY29tbWVudHM6IFtdXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKCdjb250ZW50JykuaW5zZXJ0T25lKG5ld0NvbnRlbnQpXHJcblxyXG4gICAgICAgICAgICBjb25zdCB7IF9pZCwgLi4uY2xlYW5lZENvbnRlbnQgfSA9IG5ld0NvbnRlbnRcclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNPUlMoTmV4dFJlc3BvbnNlLmpzb24oY2xlYW5lZENvbnRlbnQsIHsgc3RhdHVzOiAyMDEgfSkpXHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGRiRXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgaW5zZXJ0IGVycm9yOicsIGRiRXJyb3IpXHJcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVDT1JTKE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgY29udGVudCcgfSxcclxuICAgICAgICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICAgICAgICApKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvbnRlbnQgY3JlYXRpb24gZXJyb3I6JywgZXJyb3IpXHJcbiAgICAgICAgcmV0dXJuIGhhbmRsZUNPUlMoTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIGNvbnRlbnQnIH0sXHJcbiAgICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICAgICkpXHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIFBVVCAvYXBpL2NvbnRlbnQgLSBVcGRhdGUgY29udGVudFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKHJlcXVlc3QpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb24oKVxyXG4gICAgICAgIGlmICghc2Vzc2lvbj8udXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlQ09SUyhOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgICAgICAgIHsgZXJyb3I6ICdBdXRoZW50aWNhdGlvbiByZXF1aXJlZCcgfSxcclxuICAgICAgICAgICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICAgICAgICApKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXHJcbiAgICAgICAgY29uc3QgeyBpZCwgdGl0bGUsIGRlc2NyaXB0aW9uLCBwYWdlcywgbWV0YWRhdGEsIHN0YXR1cyB9ID0gYm9keVxyXG5cclxuICAgICAgICBpZiAoIWlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVDT1JTKE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICAgICAgeyBlcnJvcjogJ0NvbnRlbnQgSUQgaXMgcmVxdWlyZWQnIH0sXHJcbiAgICAgICAgICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgICAgICAgKSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgY29ubmVjdFRvTW9uZ28oKVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBjb250ZW50IGV4aXN0cyBhbmQgdXNlciBoYXMgcGVybWlzc2lvblxyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0NvbnRlbnQgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCdjb250ZW50JykuZmluZE9uZSh7IGlkIH0pXHJcblxyXG4gICAgICAgICAgICBpZiAoIWV4aXN0aW5nQ29udGVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNPUlMoTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgICAgICAgICAgeyBlcnJvcjogJ0NvbnRlbnQgbm90IGZvdW5kJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgc3RhdHVzOiA0MDQgfVxyXG4gICAgICAgICAgICAgICAgKSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQ2hlY2sgcGVybWlzc2lvbnNcclxuICAgICAgICAgICAgY29uc3QgdXNlclJvbGVzID0gc2Vzc2lvbi51c2VyWydodHRwczovL21hbm5hLWFwcC5jb20vcm9sZXMnXSB8fCBbXVxyXG4gICAgICAgICAgICBjb25zdCBpc0FkbWluID0gdXNlclJvbGVzLmluY2x1ZGVzKCdhZG1pbicpXHJcbiAgICAgICAgICAgIGNvbnN0IGlzT3duZXIgPSBleGlzdGluZ0NvbnRlbnQuY3JlYXRvcklkID09PSBzZXNzaW9uLnVzZXIuc3ViXHJcblxyXG4gICAgICAgICAgICBpZiAoIWlzQWRtaW4gJiYgIWlzT3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVDT1JTKE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICAgICAgICAgIHsgZXJyb3I6ICdQZXJtaXNzaW9uIGRlbmllZCcgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IHN0YXR1czogNDAzIH1cclxuICAgICAgICAgICAgICAgICkpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFByZXBhcmUgdXBkYXRlXHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBleGlzdGluZ0NvbnRlbnQudmVyc2lvbiArIDFcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRpdGxlKSB1cGRhdGVEYXRhLnRpdGxlID0gdGl0bGVcclxuICAgICAgICAgICAgaWYgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvblxyXG4gICAgICAgICAgICBpZiAocGFnZXMpIHVwZGF0ZURhdGEucGFnZXMgPSBwYWdlc1xyXG4gICAgICAgICAgICBpZiAobWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGEubWV0YWRhdGEgPSB7IC4uLmV4aXN0aW5nQ29udGVudC5tZXRhZGF0YSwgLi4ubWV0YWRhdGEgfVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YS50YWdzID0gbWV0YWRhdGEudGFncyB8fCBleGlzdGluZ0NvbnRlbnQudGFncyB8fCBbXVxyXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YS5nZW5yZSA9IG1ldGFkYXRhLmdlbnJlIHx8IGV4aXN0aW5nQ29udGVudC5nZW5yZSB8fCBbXVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChzdGF0dXMgJiYgT2JqZWN0LnZhbHVlcyhDb250ZW50U3RhdHVzKS5pbmNsdWRlcyhzdGF0dXMpKSB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhLnN0YXR1cyA9IHN0YXR1c1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gQ29udGVudFN0YXR1cy5QVUJMSVNIRUQgJiYgIWV4aXN0aW5nQ29udGVudC5wdWJsaXNoZWRBdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZURhdGEucHVibGlzaGVkQXQgPSBuZXcgRGF0ZSgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjb250ZW50XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2NvbnRlbnQnKS51cGRhdGVPbmUoXHJcbiAgICAgICAgICAgICAgICB7IGlkIH0sXHJcbiAgICAgICAgICAgICAgICB7ICRzZXQ6IHVwZGF0ZURhdGEgfVxyXG4gICAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0Lm1hdGNoZWRDb3VudCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNPUlMoTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgICAgICAgICAgeyBlcnJvcjogJ0NvbnRlbnQgbm90IGZvdW5kJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHsgc3RhdHVzOiA0MDQgfVxyXG4gICAgICAgICAgICAgICAgKSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRmV0Y2ggdXBkYXRlZCBjb250ZW50XHJcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gYXdhaXQgZGIuY29sbGVjdGlvbignY29udGVudCcpLmZpbmRPbmUoeyBpZCB9KVxyXG4gICAgICAgICAgICBjb25zdCB7IF9pZCwgLi4uY2xlYW5lZENvbnRlbnQgfSA9IHVwZGF0ZWRDb250ZW50XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlQ09SUyhOZXh0UmVzcG9uc2UuanNvbihjbGVhbmVkQ29udGVudCkpXHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGRiRXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgdXBkYXRlIGVycm9yOicsIGRiRXJyb3IpXHJcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVDT1JTKE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byB1cGRhdGUgY29udGVudCcgfSxcclxuICAgICAgICAgICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICAgICAgICApKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvbnRlbnQgdXBkYXRlIGVycm9yOicsIGVycm9yKVxyXG4gICAgICAgIHJldHVybiBoYW5kbGVDT1JTKE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHVwZGF0ZSBjb250ZW50JyB9LFxyXG4gICAgICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgICApKVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBERUxFVEUgL2FwaS9jb250ZW50IC0gRGVsZXRlIGNvbnRlbnRcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURShyZXF1ZXN0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uKClcclxuICAgICAgICBpZiAoIXNlc3Npb24/LnVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNPUlMoTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgICAgICB7IGVycm9yOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnIH0sXHJcbiAgICAgICAgICAgICAgICB7IHN0YXR1czogNDAxIH1cclxuICAgICAgICAgICAgKSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKVxyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRJZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2lkJylcclxuXHJcbiAgICAgICAgaWYgKCFjb250ZW50SWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNPUlMoTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgICAgICB7IGVycm9yOiAnQ29udGVudCBJRCBpcyByZXF1aXJlZCcgfSxcclxuICAgICAgICAgICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICAgICAgICApKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgZGIgPSBhd2FpdCBjb25uZWN0VG9Nb25nbygpXHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGNvbnRlbnQgZXhpc3RzIGFuZCB1c2VyIGhhcyBwZXJtaXNzaW9uXHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQ29udGVudCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2NvbnRlbnQnKS5maW5kT25lKHsgaWQ6IGNvbnRlbnRJZCB9KVxyXG5cclxuICAgICAgICAgICAgaWYgKCFleGlzdGluZ0NvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGVDT1JTKE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgICAgICAgICAgICAgIHsgZXJyb3I6ICdDb250ZW50IG5vdCBmb3VuZCcgfSxcclxuICAgICAgICAgICAgICAgICAgICB7IHN0YXR1czogNDA0IH1cclxuICAgICAgICAgICAgICAgICkpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXJSb2xlcyA9IHNlc3Npb24udXNlclsnaHR0cHM6Ly9tYW5uYS1hcHAuY29tL3JvbGVzJ10gfHwgW11cclxuICAgICAgICAgICAgY29uc3QgaXNBZG1pbiA9IHVzZXJSb2xlcy5pbmNsdWRlcygnYWRtaW4nKVxyXG4gICAgICAgICAgICBjb25zdCBpc093bmVyID0gZXhpc3RpbmdDb250ZW50LmNyZWF0b3JJZCA9PT0gc2Vzc2lvbi51c2VyLnN1YlxyXG5cclxuICAgICAgICAgICAgaWYgKCFpc0FkbWluICYmICFpc093bmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlQ09SUyhOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgICAgICAgICAgICB7IGVycm9yOiAnUGVybWlzc2lvbiBkZW5pZWQnIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgeyBzdGF0dXM6IDQwMyB9XHJcbiAgICAgICAgICAgICAgICApKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBEZWxldGUgY29udGVudFxyXG4gICAgICAgICAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKCdjb250ZW50JykuZGVsZXRlT25lKHsgaWQ6IGNvbnRlbnRJZCB9KVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNPUlMoTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDb250ZW50IGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5J1xyXG4gICAgICAgICAgICB9KSlcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZGJFcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBkZWxldGUgZXJyb3I6JywgZGJFcnJvcilcclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZUNPUlMoTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICAgICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGRlbGV0ZSBjb250ZW50JyB9LFxyXG4gICAgICAgICAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICAgICAgICkpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignQ29udGVudCBkZWxldGlvbiBlcnJvcjonLCBlcnJvcilcclxuICAgICAgICByZXR1cm4gaGFuZGxlQ09SUyhOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBkZWxldGUgY29udGVudCcgfSxcclxuICAgICAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICAgKSlcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIE9QVElPTlMoKSB7XHJcbiAgICByZXR1cm4gaGFuZGxlQ09SUyhuZXcgTmV4dFJlc3BvbnNlKG51bGwsIHsgc3RhdHVzOiAyMDAgfSkpXHJcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiTW9uZ29DbGllbnQiLCJ2NCIsInV1aWR2NCIsImdldFNlc3Npb24iLCJjbGllbnQiLCJkYiIsImNvbm5lY3RUb01vbmdvIiwicHJvY2VzcyIsImVudiIsIk1PTkdPX1VSTCIsImNvbm5lY3QiLCJEQl9OQU1FIiwiaGFuZGxlQ09SUyIsInJlc3BvbnNlIiwiaGVhZGVycyIsInNldCIsIkNvbnRlbnRTdGF0dXMiLCJEUkFGVCIsIlJFVklFVyIsIlBVQkxJU0hFRCIsIkFSQ0hJVkVEIiwiR0VUIiwicmVxdWVzdCIsInNlc3Npb24iLCJ1c2VyIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiZ2V0IiwiY3JlYXRvcklkIiwibWFuaHdhSWQiLCJxdWVyeSIsInVzZXJSb2xlcyIsImlzQWRtaW4iLCJpbmNsdWRlcyIsInN1YiIsImNvbnRlbnQiLCJjb2xsZWN0aW9uIiwiZmluZCIsInNvcnQiLCJ1cGRhdGVkQXQiLCJ0b0FycmF5IiwiY2xlYW5lZENvbnRlbnQiLCJtYXAiLCJfaWQiLCJyZXN0IiwidG90YWwiLCJsZW5ndGgiLCJkYkVycm9yIiwiY29uc29sZSIsIlBPU1QiLCJib2R5IiwidHlwZSIsImNoYXB0ZXJJZCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJwYWdlcyIsIm1ldGFkYXRhIiwibmV3Q29udGVudCIsImlkIiwiY3JlYXRvck5hbWUiLCJuYW1lIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInB1Ymxpc2hlZEF0IiwidmVyc2lvbiIsInRhZ3MiLCJnZW5yZSIsInJhdGluZyIsInZpZXdzIiwibGlrZXMiLCJjb21tZW50cyIsImluc2VydE9uZSIsIlBVVCIsImV4aXN0aW5nQ29udGVudCIsImZpbmRPbmUiLCJpc093bmVyIiwidXBkYXRlRGF0YSIsInVuZGVmaW5lZCIsIk9iamVjdCIsInZhbHVlcyIsInJlc3VsdCIsInVwZGF0ZU9uZSIsIiRzZXQiLCJtYXRjaGVkQ291bnQiLCJ1cGRhdGVkQ29udGVudCIsIkRFTEVURSIsImNvbnRlbnRJZCIsImRlbGV0ZU9uZSIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiT1BUSU9OUyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/content/route.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@auth0","vendor-chunks/tslib","vendor-chunks/joi","vendor-chunks/jose","vendor-chunks/openid-client","vendor-chunks/@sideway","vendor-chunks/@hapi","vendor-chunks/debug","vendor-chunks/object-hash","vendor-chunks/yallist","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/@panva","vendor-chunks/oidc-token-hash","vendor-chunks/ms","vendor-chunks/url-join","vendor-chunks/uuid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcontent%2Froute&page=%2Fapi%2Fcontent%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcontent%2Froute.js&appDir=C%3A%5CUsers%5Cvitor%5COneDrive%5CDocumentos%5CGITHUB%5CProjetos%5CManna-1%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cvitor%5COneDrive%5CDocumentos%5CGITHUB%5CProjetos%5CManna-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();